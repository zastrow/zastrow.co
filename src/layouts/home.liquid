---
layout-name: home
eleventyImport:
	collections: ["posts"]
---
{% layout "default-layout" %}

{%- block meta -%}
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
{%- endblock -%}

{%- block main %}

{% include "home/blog-posts" %}

<div class="obj-home-grid">
	<div class="obj-home-grid__column obj-home-grid__column--articles">
		{% include "home/external-articles" %}
	</div>
	<div class="obj-home-grid__column obj-home-grid__column--books">
		{% include "home/books" %}
	</div>
	<div class="obj-home-grid__column obj-home-grid__column--instapaper">
		{% include "home/instapaper" %}
	</div>
</div>

{% endblock -%}

{%- block postscript -%}
<script>
	if (window.netlifyIdentity) {
		window.netlifyIdentity.on("init", user => {
			if (!user) {
				window.netlifyIdentity.on("login", () => {
					document.location.href = "/admin/";
				});
			}
		});
	}
</script>
{%- endblock -%}
